var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,d,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,c){a!=Array.prototype&&a!=Object.prototype&&(a[d]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,c,l){if(d){c=$jscomp.global;a=a.split(".");for(l=0;l<a.length-1;l++){var g=a[l];g in c||(c[g]={});c=c[g]}a=a[a.length-1];l=c[a];d=d(l);d!=l&&null!=d&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var d=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var g=d.length,b=a.length;c=Math.max(0,Math.min(c|0,d.length));for(var m=0;m<b&&c<g;)if(d[c++]!=a[m++])return!1;return m>=b}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var a=0;return function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+a++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(a){var d=0;return $jscomp.iteratorPrototype(function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}})};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,c,l){$jscomp.initSymbolIterator();c=null!=c?c:function(a){return a};var d=[],b=a[Symbol.iterator];if("function"==typeof b)for(a=b.call(a);!(b=a.next()).done;)d.push(c.call(l,b.value));else{b=a.length;for(var m=0;m<b;m++)d.push(c.call(l,a[m]))}return d}},"es6","es3");$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var d=a[Symbol.iterator];return d?d.call(a):$jscomp.arrayIterator(a)};
$jscomp.owns=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};
$jscomp.polyfill("WeakMap",function(a){function d(a){$jscomp.owns(a,l)||$jscomp.defineProperty(a,l,{value:{}})}function c(a){var f=Object[a];f&&(Object[a]=function(a){d(a);return f(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),f=Object.seal({}),c=new a([[b,2],[f,3]]);if(2!=c.get(b)||3!=c.get(f))return!1;c.delete(b);c.set(f,4);return!c.has(b)&&4==c.get(f)}catch(k){return!1}}())return a;var l="$jscomp_hidden_"+Math.random().toString().substring(2);c("freeze");c("preventExtensions");
c("seal");var g=0,b=function(a){this.id_=(g+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var f;!(f=a.next()).done;)f=f.value,this.set(f[0],f[1])}};b.prototype.set=function(a,f){d(a);if(!$jscomp.owns(a,l))throw Error("WeakMap key fail: "+a);a[l][this.id_]=f;return this};b.prototype.get=function(a){return $jscomp.owns(a,l)?a[l][this.id_]:void 0};b.prototype.has=function(a){return $jscomp.owns(a,l)&&$jscomp.owns(a[l],this.id_)};b.prototype.delete=
function(a){return $jscomp.owns(a,l)&&$jscomp.owns(a[l],this.id_)?delete a[l][this.id_]:!1};return b},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var f=Object.seal({x:4}),b=new a($jscomp.makeIterator([[f,"s"]]));if("s"!=b.get(f)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var k=b.entries(),c=k.next();if(c.done||c.value[0]!=f||"s"!=c.value[1])return!1;c=k.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!k.next().done?!1:!0}catch(n){return!1}}())return a;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var d=new WeakMap,c=function(a){this.data_={};this.head_=b();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var f;!(f=a.next()).done;)f=f.value,this.set(f[0],f[1])}};c.prototype.set=function(a,b){var k=l(this,a);k.list||(k.list=this.data_[k.id]=[]);k.entry?k.entry.value=b:(k.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:b},k.list.push(k.entry),this.head_.previous.next=k.entry,this.head_.previous=k.entry,this.size++);return this};c.prototype.delete=
function(a){a=l(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=b();this.size=0};c.prototype.has=function(a){return!!l(this,a).entry};c.prototype.get=function(a){return(a=l(this,a).entry)&&a.value};c.prototype.entries=function(){return g(this,function(a){return[a.key,
a.value]})};c.prototype.keys=function(){return g(this,function(a){return a.key})};c.prototype.values=function(){return g(this,function(a){return a.value})};c.prototype.forEach=function(a,b){for(var k=this.entries(),c;!(c=k.next()).done;)c=c.value,a.call(b,c[1],c[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var l=function(a,c){var k=c&&typeof c;"object"==k||"function"==k?d.has(c)?k=d.get(c):(k=""+ ++m,d.set(c,k)):k="p_"+c;var b=a.data_[k];if(b&&$jscomp.owns(a.data_,k))for(a=0;a<b.length;a++){var f=
b[a];if(c!==c&&f.key!==f.key||c===f.key)return{id:k,list:b,index:a,entry:f}}return{id:k,list:b,index:-1,entry:void 0}},g=function(a,c){var k=a.head_;return $jscomp.iteratorPrototype(function(){if(k){for(;k.head!=a.head_;)k=k.previous;for(;k.next!=k.head;)return k=k.next,{done:!1,value:c(k)};k=null}return{done:!0,value:void 0}})},b=function(){var a={};return a.previous=a.next=a.head=a},m=0;return c},"es6","es3");
$jscomp.polyfill("Set",function(a){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new a($jscomp.makeIterator([c]));if(!d.has(c)||1!=d.size||d.add(c)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var g=d.entries(),b=g.next();if(b.done||b.value[0]!=c||b.value[1]!=c)return!1;b=g.next();return b.done||b.value[0]==c||4!=b.value[0].x||b.value[1]!=b.value[0]?!1:g.next().done}catch(m){return!1}}())return a;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var d=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};d.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};d.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};d.prototype.clear=function(){this.map_.clear();this.size=0};d.prototype.has=function(a){return this.map_.has(a)};d.prototype.entries=function(){return this.map_.entries()};
d.prototype.values=function(){return this.map_.values()};d.prototype.keys=d.prototype.values;d.prototype[Symbol.iterator]=d.prototype.values;d.prototype.forEach=function(a,d){var c=this;this.map_.forEach(function(b){return a.call(d,b,b,c)})};return d},"es6","es3");
$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,l={next:function(){if(c<a.length){var g=c++;return{value:d(g,a[g]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var d=this;d instanceof String&&(d=String(d));var g=d.length;for(c=c||0;c<g;c++)if(d[c]==a||Object.is(d[c],a))return!0;return!1}},"es7","es3");
$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");
var wbBarChartPosNeg=function(){var a=500,d=500,c=.1,l=1,g="x",b="y",m,f,t,k="desc",u="green",n="red",r=function(){},e=function(e){e.each(function(e,w,h){var y=d3.select(h[w]);m=d3.scaleBand().rangeRound([0,a],.1).padding(c);f=d3.scaleLinear().range([d,0]);r=function(a){a.forEach(function(a){a[b]=+a[b]});t&&a.sort(function(a,e){return"desc"==k?+e[t]-+a[t]:+a[t]-+e[t]});var e=d3.extent(a,function(a){return a[b]});0>e[0]&&0>e[1]?e[1]=0:0<e[0]&&0<e[1]&&(e[0]=0);f.domain(e);var c=f(e[0])-f(0),h=f(e[0])-
c;m.domain(a.map(function(a){return a[g]}));y.selectAll(".rects").remove().exit().data(a).enter().append("rect").attr("class","rects").attr("x",function(a){return m(a[g])}).attr("width",function(a){return m.bandwidth()*l}).attr("y",function(a){return 0<=a[b]?f(a[b]):h}).attr("height",function(a){return 0<=a[b]?d-f(a[b])-c:f(a[b])-h}).attr("fill",function(a,e){return 0<=a[b]?u:n})};r(e)})};e.update=function(a){r(a);return e};e.width=function(k){if(!arguments.length)return a;a=k;return e};e.height=
function(a){if(!arguments.length)return d;d=a;return e};e.xSelector=function(a){if(!arguments.length)return g;g=a;return e};e.ySelector=function(a){if(!arguments.length)return b;b=a;return e};e.scaleX=function(a){if(!arguments.length)return m;m=a;return e};e.scaleY=function(a){if(!arguments.length)return f;f=a;return e};e.fillPos=function(a){if(!arguments.length)return u;u=a;return e};e.fillNeg=function(a){if(!arguments.length)return fifillNegll;n=a;return e};e.padding=function(a){if(!arguments.length)return c;
c=a;return e};e.widthFactor=function(a){if(!arguments.length)return l;l=a;return e};e.sortBy=function(a){if(!arguments.length)return t;t=a;return e};e.sortDirection=function(a){if(!arguments.length)return k;if("desc"!=a&&"asc"!=a)throw Error("Only desc or asc are allowed as sort order.");k=a;return e};return e},wbBarChart=function(){var a=500,d=500,c=.1,l=1,g="x",b="y",m,f,t,k,u="desc",n,r="black",e=function(a){return a},w="blue",v=function(){},p=function(h){h.each(function(h,p,A){var y=d3.select(A[p]);
m=d3.scaleBand().rangeRound([0,a],.1).padding(c);f=d3.scaleLinear().range([d,0]);v=function(a){a.forEach(function(a){a[b]=+a[b]});k&&a.sort(function(a,e){return"desc"==u?+e[k]-+a[k]:+a[k]-+e[k]});var c=t?t:[0,d3.max(a,function(a){return a[b]})];f.domain(c);m.domain(a.map(function(a){return a[g]}));y.selectAll(".rects").remove().exit().data(a).enter().append("rect").attr("class","rects").attr("x",function(a){if(1<=l)return m(a[g]);var e=m.bandwidth()-m.bandwidth()*l;return m(a[g])+e/2}).attr("width",
function(a){return m.bandwidth()*l}).attr("y",function(a){return f(a[b])}).attr("height",function(a){return d-f(a[b])}).attr("fill",function(a,e){return"string"===typeof w?w:"function"===typeof w?w(e):"object"===typeof w&&String(w).startsWith("rgb")?w:w[e]});n&&y.selectAll(".values").remove().exit().data(a).enter().append("text").attr("class","values").attr("fill",r).attr("text-anchor","middle").attr("x",function(a){return m(a[g])+m.bandwidth()/2}).attr("y",function(a){return f(a[b])-10}).text(function(a){return e(a[b])})};
v(h)})};p.update=function(a){v(a);return p};p.width=function(e){if(!arguments.length)return a;a=e;return p};p.height=function(a){if(!arguments.length)return d;d=a;return p};p.xSelector=function(a){if(!arguments.length)return g;g=a;return p};p.ySelector=function(a){if(!arguments.length)return b;b=a;return p};p.scaleX=function(a){if(!arguments.length)return m;m=a;return p};p.scaleY=function(a){if(!arguments.length)return f;f=a;return p};p.fill=function(a){if(!arguments.length)return w;w=a;return p};
p.yExtent=function(a){if(!arguments.length)return t;t=a;return p};p.valuesShow=function(a){if(!arguments.length)return n;n=a;return p};p.valuesFill=function(a){if(!arguments.length)return r;r=a;return p};p.valueFormat=function(a){if(!arguments.length)return e;e=a;return p};p.padding=function(a){if(!arguments.length)return c;c=a;return p};p.widthFactor=function(a){if(!arguments.length)return l;l=a;return p};p.sortDirection=function(a){if(!arguments.length)return u;if("desc"!=a&&"asc"!=a)throw Error("Only desc or asc are allowed as sort order.");
u=a;return p};p.sortBy=function(a){if(!arguments.length)return k;k=a;return p};return p},wbChordDiagram=function(){var a=500,d="black",c=d3.scaleOrdinal(d3.schemeCategory20c),l,g,b=function(b){b.each(function(b,m,k){b=d3.select(k[m]);var f=a/2-100,n=d3.chord().padAngle(.04).sortSubgroups(d3.descending).sortChords(d3.descending);m=d3.arc().innerRadius(f).outerRadius(f+20);k=d3.ribbon().radius(f);n=n(l);b.attr("class","chord-circle").datum(n);b.append("circle").attr("fill","none").attr("pointer-events",
"all").attr("r",f+20);n=b.selectAll("group").data(function(a){return a.groups}).enter().append("g").style("fill-opacity",".8").on("mouseover",function(a,b){r.classed("fade",function(a){return a.source.index!=b&&a.target.index!=b})}).on("mousemove",function(){}).on("mouseout",function(){});n.append("path").style("stroke",d).style("fill",d).attr("d",m);n.append("text").each(function(a){a.angle=(a.startAngle+a.endAngle)/2}).attr("dy",".35em").style("font-size","90%").attr("text-anchor",function(a){return a.angle>
Math.PI?"end":null}).attr("transform",function(a){return"rotate("+(180*a.angle/Math.PI-90)+")translate("+(f+26)+")"+(a.angle>Math.PI?"rotate(180)":"")}).style("fill",d).text(function(a){return g[a.index].key});var r=b.selectAll("chord").data(function(a){return a}).enter().append("path").attr("class","chordpaths").style("fill-opacity",".8").style("stroke-width","25px").style("fill",function(a,b){return c(b)}).attr("d",k.radius(f))})};b.radius=function(c){if(!arguments.length)return a;a=c;return b};
b.matrix=function(a){if(!arguments.length)return l;l=a;return b};b.keys=function(a){if(!arguments.length)return g;g=a;return b};b.colors=function(a){if(!arguments.length)return c;c=a;return b};b.fill=function(a){if(!arguments.length)return d;d=a;return b};return b},wbDonutChart=function(){var a=500,d="black",c=d3.scaleOrdinal(d3.schemeCategory10),l=function(g){g.each(function(b,g,f){g=d3.select(f[g]);f=d3.pie().value(function(a){return a.percent}).sort(null).padAngle(.03);var m=a/2,k=a/8;k=d3.arc().outerRadius(m).innerRadius(k);
g.selectAll("path").data(f(b)).enter().append("path").attr("class","paths").attr("d",k).attr("fill",function(a,b){return c(b)});b=d3.scaleOrdinal().domain(b.map(function(a){return a.label})).range(b.map(function(a,b){return c(b)}));g.append("g").attr("class","legend").attr("transform",function(a,b){return"translate("+(m+10)+","+(-m+10)+")"});b=d3.legendColor().shape("path",d3.symbol().type(d3.symbolCircle).size(100)()).scale(b);g.select(".legend").call(b).style("fill",d).style("font-size","90%")})};
l.radius=function(c){if(!arguments.length)return a;a=c;return l};l.fillLegend=function(a){if(!arguments.length)return d;d=a;return l};l.colors=function(a){if(!arguments.length)return c;c=a;return l};return l};
function wbGeoMap(){var a=500,d=500,c="#666666",l="#555555",g=1,b,m,f=!0,t=function(){},k=function(k){k.each(function(k,r,e){var n=d3.select(e[r]),u,p=function(b){var e=a/2,k=d/2,c=1;null===u||u!==b?(k=B.centroid(b),e=+k[0],k=+k[1],c=2.5,u=b):u=null;n.transition().duration(1E3).attr("transform","translate("+a/2+","+d/2+")scale("+c+")translate("+-e+","+-k+")").style("stroke-width",1.75/c+"px")};e=d3.geoBounds(k);b&&(e=b);r=e[0];e=e[1];var h=-(e[0]+r[0])/2,y=[(e[0]+r[0])/2+h,(e[1]+r[1])/2];m=d3.geoAlbers().parallels([r[1],
e[1]]).translate([a/2,d/2]).rotate([h,0,0]).center(y);var C=m(r),A=m(e);C=1*Math.min(a/(A[0]-C[0]),d/(-A[1]+C[1]));m=d3.geoAlbers().parallels([r[1],e[1]]).rotate([h,0,0]).translate([a/2,d/2]).scale(975*C).center(y);var B=d3.geoPath().projection(m);t=function(){n.selectAll(".wb-feature-paths").exit().remove().data(k.features).enter().append("path").attr("d",B).attr("class","wb-feature-paths").style("fill",c).style("stroke",l).style("stroke-width",g);if(f)n.selectAll(".wb-feature-paths").on("click",
p)};t()})};k.width=function(b){if(!arguments.length)return a;a=b;return k};k.height=function(a){if(!arguments.length)return d;d=a;return k};k.projection=function(a){if(!arguments.length)return m;m=a;return k};k.mapFill=function(a){if(!arguments.length)return c;c=a;return k};k.mapStroke=function(a){if(!arguments.length)return l;l=a;return k};k.boundsManual=function(a){if(!arguments.length)return b;b=a;return k};k.mapStrokeWidth=function(a){if(!arguments.length)return g;g=a;return k};k.allowZoom=function(a){if(!arguments.length)return f;
f=a;return k};k.update=function(){t()};return k}
function wbHeatMap(){var a=500,d=500,c="black",l="#ffffd9 #edf8b1 #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #253494 #081d58".split(" "),g=function(b){b.each(function(b,f,g){f=d3.select(g[f]);b.forEach(function(a){a.day=+a.day;a.hour=+a.hour;a.value=+a.value});g=Array(24);for(var k=0;k<g.length;k++)g[k]=k+"";k="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" ");var m=Math.floor(a/24),n=Math.floor(d/k.length);f.selectAll(".dayLabel").data(k).enter().append("text").text(function(a){return a}).attr("x",0).attr("y",
function(a,b){return b*n}).style("text-anchor","end").style("fill",c).attr("dominant-baseline","middle").attr("transform","translate(-6,"+n/2+")");f.selectAll(".timeLabel").data(g).enter().append("text").text(function(a){return a}).attr("x",function(a,b){return b*m}).attr("y",0).style("text-anchor","middle").style("fill",c).attr("transform","translate("+m/2+", -6)");g=f.selectAll(".hour").data(b).enter().append("rect").attr("x",function(a){return a.hour*m}).attr("y",function(a){return(a.day-1)*n}).attr("class",
"hour bordered").attr("width",m).attr("height",n).attr("stroke",c).attr("stroke-width","1").style("fill",c);b=d3.extent(b,function(a){return a.value});var r=d3.scaleQuantile().domain(b).range(l);g.style("fill",function(a){return r(a.value)});b=f.selectAll(".legend").data([0].concat(r.quantiles()),function(a){return a}).enter().append("g");b.append("rect").attr("x",function(a,b){return 2*m*b}).attr("y",d+10).attr("width",2*m).attr("height",n/2).attr("stroke",c).attr("stroke-width","1").style("fill",
function(a,b){return l[b]});b.append("text").attr("dominant-baseline","hanging").text(function(a){return"\u2265 "+Math.round(a)}).attr("x",function(a,b){return 2*m*b}).attr("y",d+n).style("fill",c)})};g.width=function(b){if(!arguments.length)return a;a=b;return g};g.height=function(a){if(!arguments.length)return d;d=a;return g};g.colors=function(a){if(!arguments.length)return l;l=a;return g};g.fill=function(a){if(!arguments.length)return c;c=a;return g};return g}
function wbLinePlot(){var a=500,d=500,c=d3.scaleLinear(),l=d3.scaleLinear(),g="x",b=["y"],m=function(a){return a},f=function(a){return a},t,k,u,n,r=!1,e=["red"],w=1,v="white",p=[d3.curveBasis],h=!0,y="black",C=0,A=0,B,x="red",D=!1,z=function(){},q=function(f){f.each(function(f,q,I){var v=d3.select(I[q]);if(2*b.length!=p.length+e.length)throw Error("If you enter more than one y-data-point, you need to set the curve and stroke options with equally-sized arrays.");h&&(q=v.append("g").attr("font-size",
"75%").attr("text-anchor","end").attr("transform","translate("+C+","+A+")").selectAll("g").data(b).enter().append("g").call(d3wb.util.makeUnselectable()).attr("transform",function(a,b){return"translate(0,"+20*b+")"}),q.append("rect").attr("x",-19).attr("width",19).attr("height",19).attr("fill",function(a,b){return e[b]}),q.append("text").attr("x",-22).attr("y",9.5).attr("dy","0.32em").text(function(a){return a}).attr("fill",y));if(D){v.append("line").attr("class","tooltip-line");v.append("text").attr("class",
"tooltip-text").attr("x",5).attr("y",0).style("font-size","85%").attr("text-anchor","start").attr("dominant-baseline","hanging").style("fill",y);b.forEach(function(a,b){v.append("circle").attr("class","tooltip-circle tooltip-circle-"+a)});var x=v.append("rect").attr("class","selector-box").attr("width",a).attr("height",d).attr("opacity",0)}z=function(f){void 0===u&&(u=d3.extent(f,function(a){return a[g]}));void 0===n&&(n=d3.extent(f.map(function(a){return b.map(function(b){return+a[b]})}).reduce(function(a,
b){return a.concat(b)})),r&&(n[0]=0));t=c.rangeRound([0,a]).domain(u);k=l.rangeRound([d,0]).domain(n);b.forEach(function(a,c){a=d3.line().curve(p[c]).x(function(a){return t(a[g])}).y(function(a){return k(a[b[c]])});var d=B?B:"line-"+b[c];v.select("."+d).empty()?v.datum(f).append("path").attr("class","line "+d).attr("d",a).style("fill","none").style("stroke-linecap","round").style("stroke-linejoin","round").style("pointer-events","none").style("stroke-width",w).style("stroke",e[c]):v.datum(f).select("."+
d).transition().duration(500).attr("d",a)})};z(f);q=function(){v.selectAll(".tooltip-line").attr("stroke","none");v.selectAll(".tooltip-circle").style("opacity",0);v.selectAll(".tooltip-text").style("opacity",0)};if(D)x.on("mousemove",function(){var a=[],c=d3.mouse(v.node()),z=d3.bisector(function(a){return a[g]}).right,h=t.invert(c[0]);c=z(f,h);var l=f[c-1];a.push(m(l[g]));var n=f[c];v.selectAll(".tooltip-line").attr("stroke","red").attr("x1",t(h)).attr("x2",t(h)).attr("y1",0).attr("y2",d);b.forEach(function(c,
d){var f=d3.interpolateNumber(l[b[d]],n[b[d]]),z=n[g]-l[g];f=f(h%z/z);a.push(c+" \u2013 "+l[b[d]]);v.select(".tooltip-circle-"+c).attr("cx",t(h)).attr("cy",k(f)).attr("r",7).style("fill",e[d]).style("opacity",1)});c=v.selectAll(".tooltip-text").style("opacity",1);v.selectAll(".tooltip-text-line").remove();for(z={i$1:0};z.i$1<a.length;z={i$1:z.i$1},z.i$1++)c.append("tspan").attr("class","tooltip-text-line").attr("x",5).attr("dy",function(a){return function(){return 0==a.i$1?0:15}}(z)).text(a[z.i$1])}).on("mouseout",
q)})};q.width=function(b){if(!arguments.length)return a;a=b;return q};q.height=function(a){if(!arguments.length)return d;d=a;return q};q.xAxisScale=function(a){if(!arguments.length)return c;c=a;return q};q.yAxisScale=function(a){if(!arguments.length)return l;l=a;return q};q.xDataPoints=function(a){if(!arguments.length)return g;g=a;return q};q.yDataPoints=function(a){if(!arguments.length)return b;b=a.constructor===Array?a:[a];return q};q.axisColor=function(a){if(!arguments.length)return v;v=a;return q};
q.stroke=function(a){if(!arguments.length)return e;e=a.constructor===Array?a:[a];return q};q.curve=function(a){if(!arguments.length)return p;p=a.constructor===Array?a:[a];return q};q.scaleX=function(){return t};q.scaleY=function(){return k};q.update=function(a){z(a);return q};q.xMinMax=function(a){if(!arguments.length)return u;u=a;return q};q.yMinMax=function(a){if(!arguments.length)return n;n=a;return q};q.legendFill=function(a){if(!arguments.length)return y;y=a;return q};q.legendX=function(a){if(!arguments.length)return C;
C=a;return q};q.legendY=function(a){if(!arguments.length)return A;A=a;return q};q.strokeWidth=function(a){if(!arguments.length)return w;w=a;return q};q.setYMinToZero=function(a){if(!arguments.length)return r;r=a;return q};q.dataPointLineFill=function(a){if(!arguments.length)return x;x=a;return q};q.xDataPointsFormat=function(a){if(!arguments.length)return m;m=a;return q};q.yDataPointsFormat=function(a){if(!arguments.length)return f;f=a;return q};q.activateTooltip=function(a){if(!arguments.length)return D;
console.log("ATTENTION: This feature is experimental.");D=a;return q};q.showLegend=function(a){if(!arguments.length)return h;h=a;return q};q.lineClass=function(a){if(!arguments.length)return B;B=a;return q};return q}
function wbNetworkDiagram(){var a=500,d=500,c="black",l="black",g=1,b="black",m=[1,10],f=[5,20],t,k=0,u=0,n=.5,r=["red","green","blue"],e=function(e){e.each(function(e,p,h){p=d3.select(h[p]);var y=d3.scaleLinear().domain(d3.extent(e.nodes,function(a){return a.weight})).range(f),w=d3.scaleLinear().domain(d3.extent(e.links,function(a){return a.value})).range(m);e.nodes.forEach(function(a){a.r=y(a.weight)});var v=p.append("g").selectAll("line").data(e.links).enter().append("line").attr("class","lines").attr("stroke-width",
function(a){return w(a.value)}).style("stroke",c).style("stroke-opacity","0.6"),B=p.append("g").selectAll("circle").data(e.nodes).enter().append("circle").attr("class","circles").attr("r",function(a){return a.r}).attr("fill",function(a){return r[a.group]}).style("stroke",l).style("stroke-width",g).call(d3.drag().on("start",function(a){d3.event.active||x.alphaTarget(.5).restart();a.fx=a.x;a.fy=a.y}).on("drag",function(a){a.fx=d3.event.x;a.fy=d3.event.y}).on("end",function(a){d3.event.active||x.alphaTarget(0);
a.fx=null;a.fy=null})),x=d3.forceSimulation().force("x",d3.forceX(a)).force("y",d3.forceY(d)).force("center",d3.forceCenter(a/2,d/2)).force("charge",d3.forceManyBody()).force("collide",d3.forceCollide().radius(function(a){return a.r+n}).iterations(3)).force("link",d3.forceLink().id(function(a){return a.id}));x.nodes(e.nodes).on("tick",function(){B.attr("cx",function(b){return b.x=Math.max(b.r,Math.min(a-b.r,b.x))}).attr("cy",function(a){return a.y=Math.max(a.r,Math.min(d-a.r,a.y))});v.attr("x1",function(a){return a.source.x}).attr("y1",
function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y})});x.force("link").links(e.links);if(void 0===t){var D=[];e.nodes.forEach(function(a){D.push(a.group)});e=Array.from(new Set(D.sort()));t=[];for(h=0;h<e.length;h++)t.push([e[h],r(e[h])])}e=p.append("g").attr("font-size","75%").attr("text-anchor","end").selectAll("g").data(t).enter().append("g").attr("transform",function(a,b){return"translate(0,"+(20*b+10)+")"});e.append("rect").attr("x",
a-19+k).attr("y",0+u).attr("width",19).attr("height",19).attr("fill",function(a){return a[1]});e.append("text").attr("x",a-24+k).attr("y",9.5+u).attr("dy","0.32em").attr("fill",b).text(function(a){return a[0]})})};e.legendShiftX=function(a){if(!arguments.length)return k;k=a;return e};e.legendShiftY=function(a){if(!arguments.length)return u;u=a;return e};e.width=function(b){if(!arguments.length)return a;a=b;return e};e.height=function(a){if(!arguments.length)return d;d=a;return e};e.linkStroke=function(a){if(!arguments.length)return c;
c=a;return e};e.nodeStroke=function(a){if(!arguments.length)return l;l=a;return e};e.nodeStrokeWidth=function(a){if(!arguments.length)return g;g=a;return e};e.legend=function(a){if(!arguments.length)return t;t=a;return e};e.legendColor=function(a){if(!arguments.length)return b;b=a;return e};e.colors=function(a){if(!arguments.length)return r;r=a;return e};e.collide=function(a){if(!arguments.length)return n;n=a;return e};e.thicknessRange=function(a){if(!arguments.length)return m;m=a;return e};e.radiusRange=
function(a){if(!arguments.length)return f;f=a;return e};return e}
function wbNumericHistogram(){var a=500,d=500,c="red",l="white",g=50,b=function(){},m=function(f){f.each(function(f,k,m){function n(k){p.domain(k);var m=d3.histogram().value(function(a){return a.value}).domain(p.domain()).thresholds(p.ticks(g))(f);k=d3.extent(m,function(a){return a.length});y.domain(k);z.selectAll(".bar").remove().exit().data(m).enter().append("rect").attr("class","bar").attr("fill",c).attr("width",function(b,c){b=a/m.length;return b-.1*b}).attr("height",function(a){return d-y(a.length)}).attr("y",
function(a){return y(a.length)}).transition(h).attr("x",function(a){return p(a.x0)});e.select(".axis-x").transition(h).call(C);e.select(".axis-y").transition(h).call(A);e.selectAll(".axis line").attr("stroke",l);e.selectAll(".axis path").attr("stroke",l);e.selectAll(".axis text").attr("fill",l);b()}function r(){x=null}var e=d3.select(m[k]),t,u=d3.extent(f,function(a){return a.value}),p=d3.scaleLinear().rangeRound([0,a]),h=e.transition().duration(750),y=d3.scaleLinear().rangeRound([d,0]),C=d3.axisBottom(p),
A=d3.axisLeft(y),B=d3.brushX().extent([[0,0],[a,d]]).on("end",function(){var a=d3.event.selection;if(a)t=[p.invert(a[0])<u[0]?u[0]:p.invert(a[0]),p.invert(a[1])>u[1]?u[1]:p.invert(a[1])],e.select(".brush").call(B.move,null);else{if(!x)return x=setTimeout(r,D);t=u}n(t)}),x=null,D=350;e.append("g").attr("class","brush").call(B);var z=e.append("g");e.append("g").attr("transform","translate(0,"+d+")").attr("class","axis axis-x");e.append("g").attr("class","axis axis-y");n(u)})};m.height=function(a){if(!arguments.length)return d;
d=a;return m};m.width=function(b){if(!arguments.length)return a;a=b;return m};m.barColor=function(a){if(!arguments.length)return c;c=a;return m};m.axisColor=function(a){if(!arguments.length)return l;l=a;return m};m.numBins=function(a){if(!arguments.length)return g;g=a;return m};m.updateCallback=function(a){if(!arguments.length)return b;b=a;return m};return m}
function wbPackedBubbles(){var a=500,d=500,c=["green","white"],l=["green","red"],g,b,m=function(f){f.each(function(f,k,m){k=d3.select(m[k]);m=d3.extent(f,function(a){return a.value});var n=d3.scaleLinear().domain(m).interpolate(d3.interpolate).range(c),r=d3.scaleLinear().domain(m).interpolate(d3.interpolate).range(l);g&&(b=d3.scaleLog().domain(m).range(g));m=d3.pack().size([a,d]).padding(.3);f=d3.hierarchy({children:f}).sum(function(a){return a.value});f=k.selectAll("node").data(m(f).leaves()).enter().append("g").attr("class",
"node").attr("transform",function(a){return"translate("+a.x+","+a.y+")"});f.append("a").attr("xlink:href",function(a){return a.data.link}).append("circle").attr("class","circles").attr("id",function(a){return a.id}).transition().duration(500).attr("r",function(a){return a.r}).style("fill",function(a){return r(a.value)}).style("opacity",function(a){return g?b(a.value):"1.0"});f.append("a").attr("xlink:href",function(a){return a.data.link}).append("text").attr("class","texts").style("font-size","10px").style("text-anchor",
"middle").style("dominant-baseline","middle").style("cursor","default").style("user-select","none").style("-moz-user-select","none").attr("x",0).attr("y",0).text(function(a){return a.data.id}).style("font-size",function(a,b,c){return(2*a.r-10)/c[b].getComputedTextLength()*10+"px"}).style("opacity",function(a){return g?b(a.value):"1.0"}).transition().duration(1E3).style("fill",function(a){return n(a.value)})})};m.width=function(b){if(!arguments.length)return a;a=b;return m};m.height=function(a){if(!arguments.length)return d;
d=a;return m};m.colorRange=function(a){if(!arguments.length)return c;c=a;return m};m.fillRange=function(a){if(!arguments.length)return l;l=a;return m};m.fadeOpacity=function(a){if(!arguments.length)return g;g=a;return m};m.fadeScale=function(a){if(!arguments.length)return b;b=a;return m};return m}
var wbPosNeg=function(){var a=500,d=500,c=.1,l,g,b="green",m="red",f=function(c){c.each(function(c,f,n){f=d3.select(n[f]);c.forEach(function(a){a.pos=+a.pos;a.neg=+a.neg;a.sum=+a.sum});c=c.reverse();n=d3.extent(c,function(a){return Math.max(a.pos,-a.neg)});n[0]=0;l=d3.scaleLinear().range([0,a/2]).domain(n);g=d3.scaleBand().rangeRound([d,0],.1).padding(.2).domain(c.map(function(a){return a.label}));f.selectAll(".rects-pos").remove().exit().data(c).enter().append("rect").attr("class","rects-pos").attr("x",
a/2).attr("width",function(a){return l(a.pos)}).attr("y",function(a){return g(a.label)}).attr("height",function(a){return g.bandwidth()}).style("fill",b);f.selectAll(".rects-neg").remove().exit().data(c).enter().append("rect").attr("class","rects-neg").attr("x",function(b){return a/2-l(-b.neg)}).attr("width",function(a){return l(-a.neg)}).attr("y",function(a){return g(a.label)}).attr("height",function(a){return g.bandwidth()}).style("fill",m)})};f.width=function(b){if(!arguments.length)return a;a=
b;return f};f.height=function(a){if(!arguments.length)return d;d=a;return f};f.scaleX=function(a){if(!arguments.length)return l;l=a;return f};f.scaleY=function(a){if(!arguments.length)return g;g=a;return f};f.fillPos=function(a){if(!arguments.length)return b;b=a;return f};f.fillNeg=function(a){if(!arguments.length)return m;m=a;return f};f.padding=function(a){if(!arguments.length)return c;c=a;return f};return f};
function wbSankeyDiagram(){var a=500,d=500,c="black",l=d3.scaleOrdinal(d3.schemeCategory20c),g=function(b){b.each(function(b,f,g){f=d3.select(g[f]);d3.sankey().nodeWidth(15).nodePadding(10).size([a,d])(b);f.append("g").attr("class","sankey-link").style("fill","none").style("stroke",c).style("stroke-opacity",.2).selectAll("path").data(b.links).enter().append("path").attr("d",d3.sankeyLinkHorizontal()).attr("stroke-width",function(a){return Math.max(1,a.width)});b=f.append("g").attr("class","sankey-node").selectAll("g").data(b.nodes).enter().append("g");
b.append("rect").attr("x",function(a){return a.x0}).attr("y",function(a){return a.y0}).attr("height",function(a){return a.y1-a.y0}).attr("width",function(a){return a.x1-a.x0}).attr("fill",function(a){return l(a.name.replace(/ .*/,""))}).style("stroke",function(a){return c});b.append("text").style("fill",function(a){return c}).attr("x",function(a){return a.x0-6}).attr("y",function(a){return(a.y1+a.y0)/2}).attr("text-anchor","end").text(function(a){return a.name}).filter(function(b){return b.x0<a/2}).attr("x",
function(a){return a.x1+6}).attr("text-anchor","start")})};g.width=function(b){if(!arguments.length)return a;a=b;return g};g.height=function(a){if(!arguments.length)return d;d=a;return g};g.fill=function(a){if(!arguments.length)return c;c=a;return g};g.colors=function(a){if(!arguments.length)return l;l=a;return g};return g}
function wbScatterPlot(){var a=500,d=500,c=d3.scaleLinear(),l=d3.scaleLinear(),g=d3.scaleLinear(),b="green",m="red",f="x",t="y",k="x",u="white",n=function(){},r=void 0,e=[0,1],w=function(a){return a},v=function(a){return a},p=function(){},h=function(h){h.each(function(h,y,B){var x=d3.select(B[y]),D=d3.extent(h,function(a){return a[f]}),z=d3.extent(h,function(a){return a[t]}),q=d3.extent(h,function(a){return a[k]});x.selectAll(".datapoint").data(h).enter().append("a").attr("xlink:href",n).append("rect").attr("class",
"datapoint").attr("width",8).attr("height",8).attr("rx",5);x.append("g").attr("class","axis axis-x").attr("transform","translate(0,"+d+")");x.append("g").attr("class","axis axis-y");var C,A,G,H,E,F;p=function(n){n=n||!1;void 0!==r&&(H=d3.scaleLog().domain(d3.extent(h,function(a){return a[r]})).range(e));C=c.range([0,a]).domain(D);A=l.range([d,0]).domain(z);G=g.domain(q).interpolate(d3.interpolate).range([b,m]);F=d3.axisLeft(A);v(F);E=d3.axisBottom(C);w(E);x.select(".axis-x").transition().duration(500).call(E);
x.select(".axis-y").transition().duration(500).call(F);x.selectAll(".axis line").attr("stroke",u);x.selectAll(".axis path").attr("stroke",u);x.selectAll(".axis text").attr("fill",u);(n?x.selectAll(".datapoint"):x.selectAll(".datapoint").transition().duration(500)).attr("opacity",function(a){return void 0!==r?H(a[r]):1}).attr("x",function(a){return C(a[f])-4}).attr("y",function(a){return A(a[t])-4}).style("fill",function(a){return G(a[k])})};p(!0)})};h.width=function(b){if(!arguments.length)return a;
a=b;return h};h.height=function(a){if(!arguments.length)return d;d=a;return h};h.xAxisScale=function(a){if(!arguments.length)return c;c=a;return h};h.yAxisScale=function(a){if(!arguments.length)return l;l=a;return h};h.zAxisScale=function(a){if(!arguments.length)return g;g=a;return h};h.xDataPoints=function(a){if(!arguments.length)return f;f=a;return h};h.yDataPoints=function(a){if(!arguments.length)return t;t=a;return h};h.zDataPoints=function(a){if(!arguments.length)return k;k=a;return h};h.opacityDataPoints=
function(a){if(!arguments.length)return r;r=a;return h};h.opacityRange=function(a){if(!arguments.length)return e;e=a;return h};h.axisColor=function(a){if(!arguments.length)return u;u=a;return h};h.colorLow=function(a){if(!arguments.length)return b;b=a;return h};h.colorHigh=function(a){if(!arguments.length)return m;m=a;return h};h.href=function(a){if(!arguments.length)return n;n=a;return h};h.formatXAxis=function(a){if(!arguments.length)return w;w=a;return h};h.formatYAxis=function(a){if(!arguments.length)return v;
v=a;return h};h.update=function(){p();return h};return h}
function wbStackedBarChart(){var a=500,d=500,c="x",l="y",g=["red","green","blue"],b="black",m="black",f=0,t=0,k=0,u=.1,n=0,r=!0,e=[],w,v,p=!1,h=function(c){c.each(function(c,h,l){h=d3.select(l[h]);c.forEach(function(a,b){var c=Object.keys(a);for(b=a.total=0;b<c.length;++b)e.includes(c[b])||"id"==c[b]||(a.total+=+a[c[b]])});p&&c.sort(function(a,b){return b.total-a.total});w=d3.scaleBand().rangeRound([0,a]).padding(u).align(n);v=d3.scaleLinear().rangeRound([d,0]);var y=d3.scaleOrdinal().range(g);w.domain(c.map(function(a){return a.id}));
v.domain([0,d3.max(c,function(a){return a.total})]).nice();l=c.columns.filter(function(a){return"id"!=a&&!e.includes(a)});y.domain(l);c=d3.stack().keys(l)(c);c.forEach(function(a){a.forEach(function(b){b.keyRef=a.key})});h.append("g").selectAll("g").data(c).enter().append("g").attr("fill",function(a){return y(a.key)}).selectAll("rect").data(function(a,b){return a}).enter().append("rect").attr("class","rects").attr("x",function(a){return w(a.data.id)}).attr("y",function(a){return v(a[1])}).attr("height",
function(a){return v(a[0])-v(a[1])}).attr("width",w.bandwidth()).style("stroke",m).style("stroke-width",f);r&&(c=h.append("g").attr("font-size","75%").attr("text-anchor","end").attr("transform","translate("+t+","+k+")").selectAll("g").data(l.slice()).enter().append("g").attr("transform",function(a,b){return"translate(0,"+20*b+")"}),c.append("rect").attr("x",-19).attr("width",19).attr("height",19).attr("fill",y),c.append("text").attr("x",-22).attr("y",9.5).attr("dy","0.32em").text(function(a){return a}).attr("fill",
b))})};h.width=function(b){if(!arguments.length)return a;a=b;return h};h.height=function(a){if(!arguments.length)return d;d=a;return h};h.xSelector=function(a){if(!arguments.length)return c;c=a;return h};h.ySelector=function(a){if(!arguments.length)return l;l=a;return h};h.scaleX=function(a){if(!arguments.length)return w;w=a;return h};h.scaleY=function(a){if(!arguments.length)return v;v=a;return h};h.colors=function(a){if(!arguments.length)return g;g=a;return h};h.legendFill=function(a){if(!arguments.length)return b;
b=a;return h};h.legendX=function(a){if(!arguments.length)return t;t=a;return h};h.legendY=function(a){if(!arguments.length)return k;k=a;return h};h.sortBySum=function(a){if(!arguments.length)return p;p=a;return h};h.ignoreColumns=function(a){if(!arguments.length)return e;e=a;return h};h.padding=function(a){if(!arguments.length)return u;u=a;return h};h.align=function(a){if(!arguments.length)return n;n=a;return h};h.showLegend=function(a){if(!arguments.length)return r;r=a;return h};h.stroke=function(a){if(!arguments.length)return m;
m=a;return h};h.strokeWidth=function(a){if(!arguments.length)return f;f=a;return h};return h}
function wbStaticNumbers(){var a=500,d=500,c="black",l="red",g=function(b){b.each(function(b,f,g){f=d3.select(g[f]);var k=a/b.length,m=.1*a/(b.length-1);f.selectAll("number-value").data(b).enter().append("text").text(function(a){return a.name}).attr("x",function(a,b){return b*k}).attr("y",d).attr("text-anchor","left").attr("dominant-baseline","baseline").attr("fill",c).style("font-size","20px").style("font-weight","bold").text(function(a){return a.value}).style("font-size",function(a,b,c){a=c[b].getComputedTextLength();
return(k-m)/a*20+"px"}).call(d3wb.util.makeUnselectable()).each(function(a,b,c){a.numberBox=c[b].getBBox()});f.selectAll("number-label").data(b).enter().append("text").text(function(a){return a.name}).attr("x",function(a,b){return b*k}).attr("y",function(a){return d-a.numberBox.height+.25*a.numberBox.height}).attr("text-anchor","left").attr("fill",l).style("font-size","20px").text(function(a){return a.label}).style("font-size",function(a,b,c){a=c[b].getComputedTextLength();return(k-m)/a*20+"px"}).call(d3wb.util.makeUnselectable()).each(function(a,
b,c){a.numberBox=c[b].getBBox()})})};g.width=function(b){if(!arguments.length)return a;a=b;return g};g.height=function(a){if(!arguments.length)return d;d=a;return g};g.fillNumber=function(a){if(!arguments.length)return c;c=a;return g};g.fillLabel=function(a){if(!arguments.length)return l;l=a;return g};return g}
function wbTimeseries(){var a=500,d=500,c="hour",l="red",g="orange",b="black",m=void 0,f=d3.mean,t,k,u,n=function(n){n.each(function(e,n,r){n=d3.select(r[n]);var p=d3.extent(e,function(a){return a.date});e.forEach(function(a){a.month=a.date.getMonth();a.year=a.date.getFullYear();a.weekday=a.date.getDay();a.hour=a.date.getHours();a.minute=a.date.getMinutes();a.day=(new Date(a.date)).setHours(0,0,0,0);a["minute-of-day"]=(new Date(a.date)).setSeconds(0,0)});r=d3.extent(e,function(a){return a[c]});if("month"==
c){var h=d3.timeMonths(new Date(2017,0,1),new Date(2017,11,31));var v=d3.timeFormat("%B")}else if("year"==c){h=d3.timeYears(new Date(r[0],0,1),new Date(r[1],12,1));v=function(a){return a};var w=[];h.forEach(function(a){w.push(a.getFullYear())});h=w}else"weekday"==c?(h=[0,1,2,3,4,5,6],v=d3.timeFormat("%A")):"day"==c?(h=d3.timeDays(p[0],p[1]),v=d3.timeFormat("%d.%m.%Y")):"minute-of-day"==c&&(h=d3.timeMinutes(p[0]-6E4,p[1]),v=d3.timeFormat("%H:%M"));t=d3.scaleOrdinal().domain(h).range(d3.range(0,a,a/
h.length));var A=a/h.length*.1;e=d3.histogram().value(function(a){return a[c]}).thresholds(h)(e);r=d3.max(e,function(a){return a.length});k=d3.scaleLinear().range([d,0]).domain([0,r+1]);r=d3.extent(e,function(a){return a.length});var B=a/h.length-A;n.selectAll("rect").data(e).enter().append("rect").attr("class","rects").attr("x",0).attr("fill",function(a){return l}).attr("transform",function(a){return"translate("+t(a.x0)+","+k(a.length)+")"}).attr("width",function(a){return B}).attr("height",function(a){return d-
k(a.length)});if(m){e.forEach(function(a){var b=[];a.forEach(function(a){b=b.concat(a.value)});a.mean=f(b)});var x=d3.scaleOrdinal().domain(h).range(d3.range(0,a,a/h.length)),D=a/h.length*.8;r=d3.max(e,function(a){return a.mean});u=d3.scaleLinear().range([d,0]).domain([0,r+1]);n.selectAll(".dim").data(e).enter().append("rect").attr("class","valuerects").attr("fill",function(a){return g}).attr("transform",function(b){var c=B/2-a/h.length*.1;return"translate("+(x(b.x0)+c)+","+u(b.mean)+")"}).attr("width",
function(b){return a/h.length-D}).attr("height",function(a){return d-u(a.mean)})}n=n.append("g").attr("transform","translate(0,"+d+")").selectAll("xaxis").data(e).enter();n.append("line").attr("x1",0).attr("x2",a).style("stroke",b);n.append("text").text(function(a,b){if("weekday"!=c)return v(h[b]);a=d3.timeDays(new Date(2017,0,1),new Date(2017,0,8));return v(a[h[b]])}).style("text-anchor","middle").style("font-size","70%").style("fill",b).attr("x",function(b,c){return a/h.length*c+a/h.length/2-A/
2}).attr("y",function(a,b,c){return c[b].getBBox().height+5});n.append("line").attr("x1",function(b,c){return a/h.length*c+a/h.length/2-A/2}).attr("x2",function(b,c){return a/h.length*c+a/h.length/2-A/2}).attr("y1",0).attr("y2",5).style("stroke",b)})};n.width=function(b){if(!arguments.length)return a;a=b;return n};n.height=function(a){if(!arguments.length)return d;d=a;return n};n.target=function(a){if(!arguments.length)return c;c=a;return n};n.fill=function(a){if(!arguments.length)return l;l=a;return n};
n.fillValues=function(a){if(!arguments.length)return g;g=a;return n};n.fillAxis=function(a){if(!arguments.length)return b;b=a;return n};n.scaleX=function(a){if(!arguments.length)return t;t=a;return n};n.scaleY=function(a){if(!arguments.length)return k;k=a;return n};n.scaleY2=function(a){if(!arguments.length)return u;u=a;return n};n.valueColumn=function(a){if(!arguments.length)return m;m=a;return n};n.valueColumnAggregation=function(a){if(!arguments.length)return f;f=a;return n};return n}
function wbTreeMap(){var a=500,d=500,c=d3.scaleOrdinal(d3.schemeCategory20c),l="black",g=function(b){b.each(function(b,f,g){f=d3.select(g[f]);g=d3.treemap().tile(d3.treemapResquarify).size([a,d]).round(!0).paddingInner(1.5);b=d3.hierarchy(b).eachBefore(function(a){a.data.id=(a.parent?a.parent.data.id+".":"")+a.data.name}).sum(function(a){return a.size}).sort(function(a,b){return b.height-a.height||b.value-a.value});g(b);b=f.selectAll("g").data(b.leaves()).enter().append("g").attr("class","cells").attr("transform",
function(a){return"translate("+a.x0+","+a.y0+")"});b.append("rect").attr("id",function(a){return a.data.id}).attr("width",function(a){return a.x1-a.x0}).attr("height",function(a){return a.y1-a.y0}).attr("fill",function(a){return c(a.parent.data.id)});b.append("clipPath").attr("id",function(a){return"clip-"+a.data.id}).append("use").attr("xlink:href",function(a){return"#"+a.data.id});b.append("text").style("font-size","75%").attr("clip-path",function(a){return"url(#clip-"+a.data.id+")"}).selectAll("tspan").data(function(a){return a.data.name.split(/(?=[A-Z][^A-Z])/g)}).enter().append("tspan").attr("x",
4).attr("y",function(a,b){return 13+10*b}).attr("fill",l).text(function(a){return a})})};g.width=function(b){if(!arguments.length)return a;a=b;return g};g.height=function(a){if(!arguments.length)return d;d=a;return g};g.colors=function(a){if(!arguments.length)return c;c=a;return g};g.fill=function(a){if(!arguments.length)return l;l=a;return g};return g}
function wbWordCloud(){var a=500,d=500,c=["green","green"],l=function(g){g.each(function(b,g,f){var l=d3.select(f[g]);b.forEach(function(a){a.fontsize=1E4*+a.textrank});g=d3.extent(b,function(a){return a.textrank});var k=d3.scaleLinear().domain(g).interpolate(d3.interpolate).range(c);d3.layout.cloud().size([a,d]).words(b).padding(1).rotate(0).font("Roboto Condensed").fontSize(function(a){return a.fontsize}).on("end",function(b){l.attr("transform","translate("+a/2+","+d/2+")");b=l.selectAll("text").data(b,
function(a){return a.text});b.enter().append("text").style("fill",function(a){return k(a.textrank)}).attr("text-anchor","middle").attr("font-size",function(a){return a.size+"px"}).attr("transform",function(a){return"translate("+[a.x,a.y]+")rotate("+a.rotate+")"}).text(function(a){return a.text});b.exit().remove()}).start()})};l.width=function(c){if(!arguments.length)return a;a=c;return l};l.height=function(a){if(!arguments.length)return d;d=a;return l};l.colorRange=function(a){if(!arguments.length)return c;
c=a;return l};return l};