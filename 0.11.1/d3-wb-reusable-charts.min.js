var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,k,e){if(null==a)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(k instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,k,e){a!=Array.prototype&&a!=Object.prototype&&(a[k]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,k,e,f){if(k){e=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var c=a[f];c in e||(e[c]={});e=e[c]}a=a[a.length-1];f=e[a];k=k(f);k!=f&&null!=k&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,e){var f=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var c=f.length,b=a.length;e=Math.max(0,Math.min(e|0,f.length));for(var g=0;g<b&&e<c;)if(f[e++]!=a[g++])return!1;return g>=b}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var a=0;return function(k){return $jscomp.SYMBOL_PREFIX+(k||"")+a++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(a){var k=0;return $jscomp.iteratorPrototype(function(){return k<a.length?{done:!1,value:a[k++]}:{done:!0}})};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,e,f){$jscomp.initSymbolIterator();e=null!=e?e:function(a){return a};var c=[],b=a[Symbol.iterator];if("function"==typeof b)for(a=b.call(a);!(b=a.next()).done;)c.push(e.call(f,b.value));else{b=a.length;for(var g=0;g<b;g++)c.push(e.call(f,a[g]))}return c}},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},k=Object.create(new $jscomp.global.Proxy(a,{get:function(e,f,c){return e==a&&"q"==f&&c==k}}));return!0===k.q}catch(e){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var k=a[Symbol.iterator];return k?k.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,k){return Object.prototype.hasOwnProperty.call(a,k)};
$jscomp.polyfill("WeakMap",function(a){function k(){if(!a||!Object.seal)return!1;try{var c=Object.seal({}),p=Object.seal({}),h=new a([[c,2],[p,3]]);if(2!=h.get(c)||3!=h.get(p))return!1;h.delete(c);h.set(p,4);return!h.has(c)&&4==h.get(p)}catch(v){return!1}}function e(a){$jscomp.owns(a,c)||$jscomp.defineProperty(a,c,{value:{}})}function f(a){var c=Object[a];c&&(Object[a]=function(a){e(a);return c(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(k())return a;
var c="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var b=0,g=function(a){this.id_=(b+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};g.prototype.set=function(a,p){e(a);if(!$jscomp.owns(a,c))throw Error("WeakMap key fail: "+a);a[c][this.id_]=p;return this};g.prototype.get=function(a){return $jscomp.owns(a,c)?a[c][this.id_]:void 0};g.prototype.has=
function(a){return $jscomp.owns(a,c)&&$jscomp.owns(a[c],this.id_)};g.prototype.delete=function(a){return $jscomp.owns(a,c)&&$jscomp.owns(a[c],this.id_)?delete a[c][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function k(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),h=new a($jscomp.makeIterator([[c,"s"]]));if("s"!=h.get(c)||1!=h.size||h.get({x:4})||h.set({x:4},"t")!=h||2!=h.size)return!1;var g=h.entries(),b=g.next();if(b.done||b.value[0]!=c||"s"!=b.value[1])return!1;b=g.next();return b.done||4!=b.value[0].x||"t"!=b.value[1]||!g.next().done?!1:!0}catch(t){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(k())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap,f=function(a){this.data_={};this.head_=g();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var h;!(h=a.next()).done;)h=h.value,this.set(h[0],h[1])}};f.prototype.set=function(a,h){var b=c(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=h:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:h},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};f.prototype.delete=function(a){a=c(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};f.prototype.has=function(a){return!!c(this,a).entry};
f.prototype.get=function(a){return(a=c(this,a).entry)&&a.value};f.prototype.entries=function(){return b(this,function(a){return[a.key,a.value]})};f.prototype.keys=function(){return b(this,function(a){return a.key})};f.prototype.values=function(){return b(this,function(a){return a.value})};f.prototype.forEach=function(a,h){for(var c=this.entries(),b;!(b=c.next()).done;)b=b.value,a.call(h,b[1],b[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var c=function(a,c){var b=c&&typeof c;"object"==
b||"function"==b?e.has(c)?b=e.get(c):(b=""+ ++n,e.set(c,b)):b="p_"+c;var h=a.data_[b];if(h&&$jscomp.owns(a.data_,b))for(a=0;a<h.length;a++){var g=h[a];if(c!==c&&g.key!==g.key||c===g.key)return{id:b,list:h,index:a,entry:g}}return{id:b,list:h,index:-1,entry:void 0}},b=function(a,c){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:c(b)};b=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=
a.next=a.head=a},n=0;return f},"es6","es3");
$jscomp.polyfill("Set",function(a){function k(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var f=Object.seal({x:4}),c=new a($jscomp.makeIterator([f]));if(!c.has(f)||1!=c.size||c.add(f)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var b=c.entries(),g=b.next();if(g.done||g.value[0]!=f||g.value[1]!=f)return!1;g=b.next();return g.done||g.value[0]==f||4!=g.value[0].x||g.value[1]!=g.value[0]?!1:b.next().done}catch(n){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(k())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};e.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};e.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};e.prototype.clear=function(){this.map_.clear();
this.size=0};e.prototype.has=function(a){return this.map_.has(a)};e.prototype.entries=function(){return this.map_.entries()};e.prototype.values=function(){return this.map_.values()};e.prototype.keys=e.prototype.values;e.prototype[Symbol.iterator]=e.prototype.values;e.prototype.forEach=function(a,c){var b=this;this.map_.forEach(function(g){return a.call(c,g,g,b)})};return e},"es6","es3");
$jscomp.iteratorFromArray=function(a,k){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,f={next:function(){if(e<a.length){var c=e++;return{value:k(c,a[c]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Object.is",function(a){return a?a:function(a,e){return a===e?0!==a||1/a===1/e:a!==a&&e!==e}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,e){var f=this;f instanceof String&&(f=String(f));var c=f.length;for(e=e||0;e<c;e++)if(f[e]==a||Object.is(f[e],a))return!0;return!1}},"es7","es3");
$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,e){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,e||0)}},"es6","es3");
var wbBarChartPosNeg=function(){var a=500,k=500,e=.1,f=1,c="x",b="y",g,n,p,h="desc",v="green",m="red",t=function(){},d=function(d){d.each(function(d,u,l){var q=d3.select(l[u]);g=d3.scaleBand().rangeRound([0,a],.1).padding(e);n=d3.scaleLinear().range([k,0]);t=function(a){a.forEach(function(a){a[b]=+a[b]});p&&a.sort(function(a,d){return"desc"==h?+d[p]-+a[p]:+a[p]-+d[p]});var d=d3.extent(a,function(a){return a[b]});0>d[0]&&0>d[1]?d[1]=0:0<d[0]&&0<d[1]&&(d[0]=0);n.domain(d);var e=n(d[0])-n(0),u=n(d[0])-
e;g.domain(a.map(function(a){return a[c]}));q.selectAll(".rects").remove().exit().data(a).enter().append("rect").attr("class","rects").attr("x",function(a){return g(a[c])}).attr("width",function(a){return g.bandwidth()*f}).attr("y",function(a){return 0<=a[b]?n(a[b]):u}).attr("height",function(a){return 0<=a[b]?k-n(a[b])-e:n(a[b])-u}).attr("fill",function(a,d){return 0<=a[b]?v:m})};t(d)})};d.update=function(a){t(a);return d};d.width=function(b){if(!arguments.length)return a;a=b;return d};d.height=
function(a){if(!arguments.length)return k;k=a;return d};d.xSelector=function(a){if(!arguments.length)return c;c=a;return d};d.ySelector=function(a){if(!arguments.length)return b;b=a;return d};d.scaleX=function(a){if(!arguments.length)return g;g=a;return d};d.scaleY=function(a){if(!arguments.length)return n;n=a;return d};d.fillPos=function(a){if(!arguments.length)return v;v=a;return d};d.fillNeg=function(a){if(!arguments.length)return fifillNegll;m=a;return d};d.padding=function(a){if(!arguments.length)return e;
e=a;return d};d.widthFactor=function(a){if(!arguments.length)return f;f=a;return d};d.sortBy=function(a){if(!arguments.length)return p;p=a;return d};d.sortDirection=function(a){if(!arguments.length)return h;if("desc"!=a&&"asc"!=a)throw Error("Only desc or asc are allowed as sort order.");h=a;return d};return d},wbBarChart=function(){var a=500,k=500,e=.1,f=1,c="x",b="y",g,n,p,h,v="desc",m,t="black",d=function(a){return a},u="blue",w=function(){},q=function(l){l.each(function(l,q,A){var x=d3.select(A[q]);
g=d3.scaleBand().rangeRound([0,a],.1).padding(e);n=d3.scaleLinear().range([k,0]);w=function(a){a.forEach(function(a){a[b]=+a[b]});h&&a.sort(function(a,d){return"desc"==v?+d[h]-+a[h]:+a[h]-+d[h]});var e=p?p:[0,d3.max(a,function(a){return a[b]})];n.domain(e);g.domain(a.map(function(a){return a[c]}));x.selectAll(".rects").remove().exit().data(a).enter().append("rect").attr("class","rects").attr("x",function(a){if(1<=f)return g(a[c]);var d=g.bandwidth()-g.bandwidth()*f;return g(a[c])+d/2}).attr("width",
function(a){return g.bandwidth()*f}).attr("y",function(a){return n(a[b])}).attr("height",function(a){return k-n(a[b])}).attr("fill",function(a,d){return"string"===typeof u?u:"function"===typeof u?u(d):"object"===typeof u&&String(u).startsWith("rgb")?u:u[d]});m&&x.selectAll(".values").remove().exit().data(a).enter().append("text").attr("class","values").attr("fill",t).attr("text-anchor","middle").attr("x",function(a){return g(a[c])+g.bandwidth()/2}).attr("y",function(a){return n(a[b])-10}).text(function(a){return d(a[b])})};
w(l)})};q.update=function(a){w(a);return q};q.width=function(d){if(!arguments.length)return a;a=d;return q};q.height=function(a){if(!arguments.length)return k;k=a;return q};q.xSelector=function(a){if(!arguments.length)return c;c=a;return q};q.ySelector=function(a){if(!arguments.length)return b;b=a;return q};q.scaleX=function(a){if(!arguments.length)return g;g=a;return q};q.scaleY=function(a){if(!arguments.length)return n;n=a;return q};q.fill=function(a){if(!arguments.length)return u;u=a;return q};
q.yExtent=function(a){if(!arguments.length)return p;p=a;return q};q.valuesShow=function(a){if(!arguments.length)return m;m=a;return q};q.valuesFill=function(a){if(!arguments.length)return t;t=a;return q};q.valueFormat=function(a){if(!arguments.length)return d;d=a;return q};q.padding=function(a){if(!arguments.length)return e;e=a;return q};q.widthFactor=function(a){if(!arguments.length)return f;f=a;return q};q.sortDirection=function(a){if(!arguments.length)return v;if("desc"!=a&&"asc"!=a)throw Error("Only desc or asc are allowed as sort order.");
v=a;return q};q.sortBy=function(a){if(!arguments.length)return h;h=a;return q};return q},wbChordDiagram=function(){var a=500,k="black",e=d3.scaleOrdinal(d3.schemeCategory20c),f,c,b=function(b){b.each(function(b,g,h){b=d3.select(h[g]);var n=a/2-100,m=d3.chord().padAngle(.04).sortSubgroups(d3.descending).sortChords(d3.descending);g=d3.arc().innerRadius(n).outerRadius(n+20);h=d3.ribbon().radius(n);m=m(f);b.attr("class","chord-circle").datum(m);b.append("circle").attr("fill","none").attr("pointer-events",
"all").attr("r",n+20);m=b.selectAll("group").data(function(a){return a.groups}).enter().append("g").style("fill-opacity",".8").on("mouseover",function(a,b){t.classed("fade",function(a){return a.source.index!=b&&a.target.index!=b})}).on("mousemove",function(){}).on("mouseout",function(){});m.append("path").style("stroke",k).style("fill",k).attr("d",g);m.append("text").each(function(a){a.angle=(a.startAngle+a.endAngle)/2}).attr("dy",".35em").style("font-size","90%").attr("text-anchor",function(a){return a.angle>
Math.PI?"end":null}).attr("transform",function(a){return"rotate("+(180*a.angle/Math.PI-90)+")translate("+(n+26)+")"+(a.angle>Math.PI?"rotate(180)":"")}).style("fill",k).text(function(a){return c[a.index].key});var t=b.selectAll("chord").data(function(a){return a}).enter().append("path").attr("class","chordpaths").style("fill-opacity",".8").style("stroke-width","25px").style("fill",function(a,b){return e(b)}).attr("d",h.radius(n))})};b.radius=function(c){if(!arguments.length)return a;a=c;return b};
b.matrix=function(a){if(!arguments.length)return f;f=a;return b};b.keys=function(a){if(!arguments.length)return c;c=a;return b};b.colors=function(a){if(!arguments.length)return e;e=a;return b};b.fill=function(a){if(!arguments.length)return k;k=a;return b};return b},wbDonutChart=function(){var a=500,k="black",e=d3.scaleOrdinal(d3.schemeCategory10),f=function(c){c.each(function(b,c,f){c=d3.select(f[c]);f=d3.pie().value(function(a){return a.percent}).sort(null).padAngle(.03);var g=a/2,h=a/8;h=d3.arc().outerRadius(g).innerRadius(h);
c.selectAll("path").data(f(b)).enter().append("path").attr("class","paths").attr("d",h).attr("fill",function(a,b){return e(b)});b=d3.scaleOrdinal().domain(b.map(function(a){return a.label})).range(b.map(function(a,b){return e(b)}));c.append("g").attr("class","legend").attr("transform",function(a,b){return"translate("+(g+10)+","+(-g+10)+")"});b=d3.legendColor().shape("path",d3.symbol().type(d3.symbolCircle).size(100)()).scale(b);c.select(".legend").call(b).style("fill",k).style("font-size","90%")})};
f.radius=function(c){if(!arguments.length)return a;a=c;return f};f.fillLegend=function(a){if(!arguments.length)return k;k=a;return f};f.colors=function(a){if(!arguments.length)return e;e=a;return f};return f};
function wbGeoMap(){var a=500,k=500,e="#666666",f="#555555",c=1,b,g,n=!0,p=function(){},h=function(h){h.each(function(h,t,d){var u=d3.select(d[t]),m,v=function(d){var b=a/2,c=k/2,h=1;null===m||m!==d?(c=y.centroid(d),b=+c[0],c=+c[1],h=2.5,m=d):m=null;u.transition().duration(1E3).attr("transform","translate("+a/2+","+k/2+")scale("+h+")translate("+-b+","+-c+")").style("stroke-width",1.75/h+"px")};d=d3.geoBounds(h);b&&(d=b);t=d[0];d=d[1];var l=-(d[0]+t[0])/2,x=[(d[0]+t[0])/2+l,(d[1]+t[1])/2];g=d3.geoAlbers().parallels([t[1],
d[1]]).translate([a/2,k/2]).rotate([l,0,0]).center(x);var D=g(t),A=g(d);D=1*Math.min(a/(A[0]-D[0]),k/(-A[1]+D[1]));g=d3.geoAlbers().parallels([t[1],d[1]]).rotate([l,0,0]).translate([a/2,k/2]).scale(975*D).center(x);var y=d3.geoPath().projection(g);p=function(){u.selectAll(".wb-feature-paths").exit().remove().data(h.features).enter().append("path").attr("d",y).attr("class","wb-feature-paths").style("fill",e).style("stroke",f).style("stroke-width",c);if(n)u.selectAll(".wb-feature-paths").on("click",
v)};p()})};h.width=function(b){if(!arguments.length)return a;a=b;return h};h.height=function(a){if(!arguments.length)return k;k=a;return h};h.projection=function(a){if(!arguments.length)return g;g=a;return h};h.mapFill=function(a){if(!arguments.length)return e;e=a;return h};h.mapStroke=function(a){if(!arguments.length)return f;f=a;return h};h.boundsManual=function(a){if(!arguments.length)return b;b=a;return h};h.mapStrokeWidth=function(a){if(!arguments.length)return c;c=a;return h};h.allowZoom=function(a){if(!arguments.length)return n;
n=a;return h};h.update=function(){p()};return h}
function wbHeatMap(){var a=500,k=500,e="black",f="#ffffd9 #edf8b1 #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #253494 #081d58".split(" "),c=function(b){b.each(function(b,c,p){c=d3.select(p[c]);b.forEach(function(a){a.day=+a.day;a.hour=+a.hour;a.value=+a.value});p=Array(24);for(var h=0;h<p.length;h++)p[h]=h+"";h="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" ");var g=Math.floor(a/24),m=Math.floor(k/h.length);c.selectAll(".dayLabel").data(h).enter().append("text").text(function(a){return a}).attr("x",0).attr("y",
function(a,b){return b*m}).style("text-anchor","end").style("fill",e).attr("dominant-baseline","middle").attr("transform","translate(-6,"+m/2+")");c.selectAll(".timeLabel").data(p).enter().append("text").text(function(a){return a}).attr("x",function(a,b){return b*g}).attr("y",0).style("text-anchor","middle").style("fill",e).attr("transform","translate("+g/2+", -6)");p=c.selectAll(".hour").data(b).enter().append("rect").attr("x",function(a){return a.hour*g}).attr("y",function(a){return(a.day-1)*m}).attr("class",
"hour bordered").attr("width",g).attr("height",m).attr("stroke",e).attr("stroke-width","1").style("fill",e);b=d3.extent(b,function(a){return a.value});var n=d3.scaleQuantile().domain(b).range(f);p.style("fill",function(a){return n(a.value)});b=c.selectAll(".legend").data([0].concat(n.quantiles()),function(a){return a}).enter().append("g");b.append("rect").attr("x",function(a,b){return 2*g*b}).attr("y",k+10).attr("width",2*g).attr("height",m/2).attr("stroke",e).attr("stroke-width","1").style("fill",
function(a,b){return f[b]});b.append("text").attr("dominant-baseline","hanging").text(function(a){return"\u2265 "+Math.round(a)}).attr("x",function(a,b){return 2*g*b}).attr("y",k+m).style("fill",e)})};c.width=function(b){if(!arguments.length)return a;a=b;return c};c.height=function(a){if(!arguments.length)return k;k=a;return c};c.colors=function(a){if(!arguments.length)return f;f=a;return c};c.fill=function(a){if(!arguments.length)return e;e=a;return c};return c}
function wbLinePlot(){var a=500,k=500,e=d3.scaleLinear(),f=d3.scaleLinear(),c="x",b=["y"],g=function(a){return a},n=function(a){return a},p,h,v,m,t=!1,d=["red"],u=1,w="white",q=[d3.curveBasis],l=!0,x="black",D=0,A=0,y,z="red",B=!1,C=function(){},r=function(n){n.each(function(n,r,E){var w=d3.select(E[r]);if(2*b.length!=q.length+d.length)throw Error("If you enter more than one y-data-point, you need to set the curve and stroke options with equally-sized arrays.");l&&(r=w.append("g").attr("font-size",
"75%").attr("text-anchor","end").attr("transform","translate("+D+","+A+")").selectAll("g").data(b).enter().append("g").call(d3wb.util.makeUnselectable()).attr("transform",function(a,b){return"translate(0,"+20*b+")"}),r.append("rect").attr("x",-19).attr("width",19).attr("height",19).attr("fill",function(a,b){return d[b]}),r.append("text").attr("x",-22).attr("y",9.5).attr("dy","0.32em").text(function(a){return a}).attr("fill",x));if(B){w.append("line").attr("class","tooltip-line");w.append("text").attr("class",
"tooltip-text").attr("x",5).attr("y",0).style("font-size","85%").attr("text-anchor","start").attr("dominant-baseline","hanging").style("fill",x);b.forEach(function(a,b){w.append("circle").attr("class","tooltip-circle tooltip-circle-"+a)});var F=w.append("rect").attr("class","selector-box").attr("width",a).attr("height",k).attr("opacity",0)}C=function(g){void 0===v&&(v=d3.extent(g,function(a){return a[c]}));void 0===m&&(m=d3.extent(g.map(function(a){return b.map(function(b){return+a[b]})}).reduce(function(a,
b){return a.concat(b)})),t&&(m[0]=0));p=e.rangeRound([0,a]).domain(v);h=f.rangeRound([k,0]).domain(m);b.forEach(function(a,e){a=d3.line().curve(q[e]).x(function(a){return p(a[c])}).y(function(a){return h(a[b[e]])});var f=y?y:"line-"+b[e];w.select("."+f).empty()?w.datum(g).append("path").attr("class","line "+f).attr("d",a).style("fill","none").style("stroke-linecap","round").style("stroke-linejoin","round").style("pointer-events","none").style("stroke-width",u).style("stroke",d[e]):w.datum(g).select("."+
f).transition().duration(500).attr("d",a)})};C(n);r=function(){w.selectAll(".tooltip-line").attr("stroke","none");w.selectAll(".tooltip-circle").style("opacity",0);w.selectAll(".tooltip-text").style("opacity",0)};if(B)F.on("mousemove",function(){var a=[],e=d3.mouse(w.node()),f=d3.bisector(function(a){return a[c]}).right,C=p.invert(e[0]);e=f(n,C);var m=n[e-1];a.push(g(m[c]));var u=n[e];w.selectAll(".tooltip-line").attr("stroke","red").attr("x1",p(C)).attr("x2",p(C)).attr("y1",0).attr("y2",k);b.forEach(function(e,
g){var f=d3.interpolateNumber(m[b[g]],u[b[g]]),k=u[c]-m[c];f=f(C%k/k);a.push(e+" \u2013 "+m[b[g]]);w.select(".tooltip-circle-"+e).attr("cx",p(C)).attr("cy",h(f)).attr("r",7).style("fill",d[g]).style("opacity",1)});e=w.selectAll(".tooltip-text").style("opacity",1);w.selectAll(".tooltip-text-line").remove();for(f={i$1:0};f.i$1<a.length;f={i$1:f.i$1},f.i$1++)e.append("tspan").attr("class","tooltip-text-line").attr("x",5).attr("dy",function(a){return function(){return 0==a.i$1?0:15}}(f)).text(a[f.i$1])}).on("mouseout",
r)})};r.width=function(b){if(!arguments.length)return a;a=b;return r};r.height=function(a){if(!arguments.length)return k;k=a;return r};r.xAxisScale=function(a){if(!arguments.length)return e;e=a;return r};r.yAxisScale=function(a){if(!arguments.length)return f;f=a;return r};r.xDataPoints=function(a){if(!arguments.length)return c;c=a;return r};r.yDataPoints=function(a){if(!arguments.length)return b;b=a.constructor===Array?a:[a];return r};r.axisColor=function(a){if(!arguments.length)return w;w=a;return r};
r.stroke=function(a){if(!arguments.length)return d;d=a.constructor===Array?a:[a];return r};r.curve=function(a){if(!arguments.length)return q;q=a.constructor===Array?a:[a];return r};r.scaleX=function(){return p};r.scaleY=function(){return h};r.update=function(a){C(a);return r};r.xMinMax=function(a){if(!arguments.length)return v;v=a;return r};r.yMinMax=function(a){if(!arguments.length)return m;m=a;return r};r.legendFill=function(a){if(!arguments.length)return x;x=a;return r};r.legendX=function(a){if(!arguments.length)return D;
D=a;return r};r.legendY=function(a){if(!arguments.length)return A;A=a;return r};r.strokeWidth=function(a){if(!arguments.length)return u;u=a;return r};r.setYMinToZero=function(a){if(!arguments.length)return t;t=a;return r};r.dataPointLineFill=function(a){if(!arguments.length)return z;z=a;return r};r.xDataPointsFormat=function(a){if(!arguments.length)return g;g=a;return r};r.yDataPointsFormat=function(a){if(!arguments.length)return n;n=a;return r};r.activateTooltip=function(a){if(!arguments.length)return B;
console.log("ATTENTION: This feature is experimental.");B=a;return r};r.showLegend=function(a){if(!arguments.length)return l;l=a;return r};r.lineClass=function(a){if(!arguments.length)return y;y=a;return r};return r}
function wbNetworkDiagram(){var a=500,k=500,e="black",f="black",c=1,b="black",g=[1,10],n=[5,20],p,h=0,v=0,m=.5,t=["red","green","blue"],d=function(d){d.each(function(d,u,l){u=d3.select(l[u]);var x=d3.scaleLinear().domain(d3.extent(d.nodes,function(a){return a.weight})).range(n),q=d3.scaleLinear().domain(d3.extent(d.links,function(a){return a.value})).range(g);d.nodes.forEach(function(a){a.r=x(a.weight)});var w=u.append("g").selectAll("line").data(d.links).enter().append("line").attr("class","lines").attr("stroke-width",
function(a){return q(a.value)}).style("stroke",e).style("stroke-opacity","0.6"),y=u.append("g").selectAll("circle").data(d.nodes).enter().append("circle").attr("class","circles").attr("r",function(a){return a.r}).attr("fill",function(a){return t[a.group]}).style("stroke",f).style("stroke-width",c).call(d3.drag().on("start",function(a){d3.event.active||z.alphaTarget(.5).restart();a.fx=a.x;a.fy=a.y}).on("drag",function(a){a.fx=d3.event.x;a.fy=d3.event.y}).on("end",function(a){d3.event.active||z.alphaTarget(0);
a.fx=null;a.fy=null})),z=d3.forceSimulation().force("x",d3.forceX(a)).force("y",d3.forceY(k)).force("center",d3.forceCenter(a/2,k/2)).force("charge",d3.forceManyBody()).force("collide",d3.forceCollide().radius(function(a){return a.r+m}).iterations(3)).force("link",d3.forceLink().id(function(a){return a.id}));z.nodes(d.nodes).on("tick",function(){y.attr("cx",function(b){return b.x=Math.max(b.r,Math.min(a-b.r,b.x))}).attr("cy",function(a){return a.y=Math.max(a.r,Math.min(k-a.r,a.y))});w.attr("x1",function(a){return a.source.x}).attr("y1",
function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y})});z.force("link").links(d.links);if(void 0===p){var B=[];d.nodes.forEach(function(a){B.push(a.group)});d=Array.from(new Set(B.sort()));p=[];for(l=0;l<d.length;l++)p.push([d[l],t(d[l])])}d=u.append("g").attr("font-size","75%").attr("text-anchor","end").selectAll("g").data(p).enter().append("g").attr("transform",function(a,b){return"translate(0,"+(20*b+10)+")"});d.append("rect").attr("x",
a-19+h).attr("y",0+v).attr("width",19).attr("height",19).attr("fill",function(a){return a[1]});d.append("text").attr("x",a-24+h).attr("y",9.5+v).attr("dy","0.32em").attr("fill",b).text(function(a){return a[0]})})};d.legendShiftX=function(a){if(!arguments.length)return h;h=a;return d};d.legendShiftY=function(a){if(!arguments.length)return v;v=a;return d};d.width=function(b){if(!arguments.length)return a;a=b;return d};d.height=function(a){if(!arguments.length)return k;k=a;return d};d.linkStroke=function(a){if(!arguments.length)return e;
e=a;return d};d.nodeStroke=function(a){if(!arguments.length)return f;f=a;return d};d.nodeStrokeWidth=function(a){if(!arguments.length)return c;c=a;return d};d.legend=function(a){if(!arguments.length)return p;p=a;return d};d.legendColor=function(a){if(!arguments.length)return b;b=a;return d};d.colors=function(a){if(!arguments.length)return t;t=a;return d};d.collide=function(a){if(!arguments.length)return m;m=a;return d};d.thicknessRange=function(a){if(!arguments.length)return g;g=a;return d};d.radiusRange=
function(a){if(!arguments.length)return n;n=a;return d};return d}
function wbNumericHistogram(){var a=500,k=500,e="red",f="white",c=50,b=function(){},g=function(g){g.each(function(g,h,n){function m(h){q.domain(h);var n=d3.histogram().value(function(a){return a.value}).domain(q.domain()).thresholds(q.ticks(c))(g);h=d3.extent(n,function(a){return a.length});x.domain(h);C.selectAll(".bar").remove().exit().data(n).enter().append("rect").attr("class","bar").attr("fill",e).attr("width",function(b,d){b=a/n.length;return b-.1*b}).attr("height",function(a){return k-x(a.length)}).attr("y",
function(a){return x(a.length)}).transition(l).attr("x",function(a){return q(a.x0)});d.select(".axis-x").transition(l).call(D);d.select(".axis-y").transition(l).call(A);d.selectAll(".axis line").attr("stroke",f);d.selectAll(".axis path").attr("stroke",f);d.selectAll(".axis text").attr("fill",f);b()}function t(){z=null}var d=d3.select(n[h]),p,v=d3.extent(g,function(a){return a.value}),q=d3.scaleLinear().rangeRound([0,a]),l=d.transition().duration(750),x=d3.scaleLinear().rangeRound([k,0]),D=d3.axisBottom(q),
A=d3.axisLeft(x),y=d3.brushX().extent([[0,0],[a,k]]).on("end",function(){var a=d3.event.selection;if(a)p=[q.invert(a[0])<v[0]?v[0]:q.invert(a[0]),q.invert(a[1])>v[1]?v[1]:q.invert(a[1])],d.select(".brush").call(y.move,null);else{if(!z)return z=setTimeout(t,B);p=v}m(p)}),z=null,B=350;d.append("g").attr("class","brush").call(y);var C=d.append("g");d.append("g").attr("transform","translate(0,"+k+")").attr("class","axis axis-x");d.append("g").attr("class","axis axis-y");m(v)})};g.height=function(a){if(!arguments.length)return k;
k=a;return g};g.width=function(b){if(!arguments.length)return a;a=b;return g};g.barColor=function(a){if(!arguments.length)return e;e=a;return g};g.axisColor=function(a){if(!arguments.length)return f;f=a;return g};g.numBins=function(a){if(!arguments.length)return c;c=a;return g};g.updateCallback=function(a){if(!arguments.length)return b;b=a;return g};return g}
function wbPackedBubbles(){var a=500,k=500,e=["green","white"],f=["green","red"],c,b,g=function(g){g.each(function(g,h,n){h=d3.select(n[h]);n=d3.extent(g,function(a){return a.value});var m=d3.scaleLinear().domain(n).interpolate(d3.interpolate).range(e),t=d3.scaleLinear().domain(n).interpolate(d3.interpolate).range(f);c&&(b=d3.scaleLog().domain(n).range(c));n=d3.pack().size([a,k]).padding(.3);g=d3.hierarchy({children:g}).sum(function(a){return a.value});g=h.selectAll("node").data(n(g).leaves()).enter().append("g").attr("class",
"node").attr("transform",function(a){return"translate("+a.x+","+a.y+")"});g.append("a").attr("xlink:href",function(a){return a.data.link}).append("circle").attr("class","circles").attr("id",function(a){return a.id}).transition().duration(500).attr("r",function(a){return a.r}).style("fill",function(a){return t(a.value)}).style("opacity",function(a){return c?b(a.value):"1.0"});g.append("a").attr("xlink:href",function(a){return a.data.link}).append("text").attr("class","texts").style("font-size","10px").style("text-anchor",
"middle").style("dominant-baseline","middle").style("cursor","default").style("user-select","none").style("-moz-user-select","none").attr("x",0).attr("y",0).text(function(a){return a.data.id}).style("font-size",function(a,b,c){return(2*a.r-10)/c[b].getComputedTextLength()*10+"px"}).style("opacity",function(a){return c?b(a.value):"1.0"}).transition().duration(1E3).style("fill",function(a){return m(a.value)})})};g.width=function(b){if(!arguments.length)return a;a=b;return g};g.height=function(a){if(!arguments.length)return k;
k=a;return g};g.colorRange=function(a){if(!arguments.length)return e;e=a;return g};g.fillRange=function(a){if(!arguments.length)return f;f=a;return g};g.fadeOpacity=function(a){if(!arguments.length)return c;c=a;return g};g.fadeScale=function(a){if(!arguments.length)return b;b=a;return g};return g}
var wbPosNeg=function(){var a=500,k=500,e=.1,f,c,b="green",g="red",n=function(e){e.each(function(h,e,m){e=d3.select(m[e]);h.forEach(function(a){a.pos=+a.pos;a.neg=+a.neg;a.sum=+a.sum});h=h.reverse();m=d3.extent(h,function(a){return Math.max(a.pos,-a.neg)});m[0]=0;f=d3.scaleLinear().range([0,a/2]).domain(m);c=d3.scaleBand().rangeRound([k,0],.1).padding(.2).domain(h.map(function(a){return a.label}));e.selectAll(".rects-pos").remove().exit().data(h).enter().append("rect").attr("class","rects-pos").attr("x",
a/2).attr("width",function(a){return f(a.pos)}).attr("y",function(a){return c(a.label)}).attr("height",function(a){return c.bandwidth()}).style("fill",b);e.selectAll(".rects-neg").remove().exit().data(h).enter().append("rect").attr("class","rects-neg").attr("x",function(b){return a/2-f(-b.neg)}).attr("width",function(a){return f(-a.neg)}).attr("y",function(a){return c(a.label)}).attr("height",function(a){return c.bandwidth()}).style("fill",g)})};n.width=function(b){if(!arguments.length)return a;a=
b;return n};n.height=function(a){if(!arguments.length)return k;k=a;return n};n.scaleX=function(a){if(!arguments.length)return f;f=a;return n};n.scaleY=function(a){if(!arguments.length)return c;c=a;return n};n.fillPos=function(a){if(!arguments.length)return b;b=a;return n};n.fillNeg=function(a){if(!arguments.length)return g;g=a;return n};n.padding=function(a){if(!arguments.length)return e;e=a;return n};return n};
function wbSankeyDiagram(){var a=500,k=500,e="black",f=d3.scaleOrdinal(d3.schemeCategory20c),c=function(b){b.each(function(b,c,p){c=d3.select(p[c]);d3.sankey().nodeWidth(15).nodePadding(10).size([a,k])(b);c.append("g").attr("class","sankey-link").style("fill","none").style("stroke",e).style("stroke-opacity",.2).selectAll("path").data(b.links).enter().append("path").attr("d",d3.sankeyLinkHorizontal()).attr("stroke-width",function(a){return Math.max(1,a.width)});b=c.append("g").attr("class","sankey-node").selectAll("g").data(b.nodes).enter().append("g");
b.append("rect").attr("x",function(a){return a.x0}).attr("y",function(a){return a.y0}).attr("height",function(a){return a.y1-a.y0}).attr("width",function(a){return a.x1-a.x0}).attr("fill",function(a){return f(a.name.replace(/ .*/,""))}).style("stroke",function(a){return e});b.append("text").style("fill",function(a){return e}).attr("x",function(a){return a.x0-6}).attr("y",function(a){return(a.y1+a.y0)/2}).attr("text-anchor","end").text(function(a){return a.name}).filter(function(b){return b.x0<a/2}).attr("x",
function(a){return a.x1+6}).attr("text-anchor","start")})};c.width=function(b){if(!arguments.length)return a;a=b;return c};c.height=function(a){if(!arguments.length)return k;k=a;return c};c.fill=function(a){if(!arguments.length)return e;e=a;return c};c.colors=function(a){if(!arguments.length)return f;f=a;return c};return c}
function wbScatterPlot(){var a=500,k=500,e="x",f="y",c,b=d3.scaleLinear(),g=d3.scaleLinear(),n=d3.scaleLinear(),p="green",h="red",v=void 0,m=[0,1],t=function(){},d=function(d){d.each(function(d,u,l){var x=d3.select(l[u]),q=d3.extent(d,function(a){return a[e]}),w=d3.extent(d,function(a){return a[f]});c=c||e;var y=d3.extent(d,function(a){return a[c]});x.selectAll(".scatter-datapoint").data(d).enter().append("rect").attr("class","scatter-datapoint").attr("width",8).attr("height",8).attr("rx",5);var z,
B,C,r;t=function(l){l=l||!1;void 0!==v&&(r=d3.scaleLog().domain(d3.extent(d,function(a){return a[v]})).range(m));z=b.range([0,a]).domain(q);B=g.range([k,0]).domain(w);C=n.domain(y).interpolate(d3.interpolate).range([p,h]);(l?x.selectAll(".scatter-datapoint"):x.selectAll(".scatter-datapoint").transition().duration(500)).attr("opacity",function(a){return void 0!==v?r(a[v]):1}).attr("x",function(a){return z(a[e])-4}).attr("y",function(a){return B(a[f])-4}).style("fill",function(a){return C(a[c])})};
t(!0)})};d.width=function(b){if(!arguments.length)return a;a=b;return d};d.height=function(a){if(!arguments.length)return k;k=a;return d};d.xAxisScale=function(a){if(!arguments.length)return b;b=a;return d};d.yAxisScale=function(a){if(!arguments.length)return g;g=a;return d};d.zAxisScale=function(a){if(!arguments.length)return n;n=a;return d};d.xDataPoints=function(a){if(!arguments.length)return e;e=a;return d};d.yDataPoints=function(a){if(!arguments.length)return f;f=a;return d};d.zDataPoints=function(a){if(!arguments.length)return c;
c=a;return d};d.opacityDataPoints=function(a){if(!arguments.length)return v;v=a;return d};d.opacityRange=function(a){if(!arguments.length)return m;m=a;return d};d.colorLow=function(a){if(!arguments.length)return p;p=a;return d};d.colorHigh=function(a){if(!arguments.length)return h;h=a;return d};d.color=function(a){if(arguments.length)return h=p=a,d};d.update=function(){t();return d};return d}
function wbStackedBarChart(){var a=500,k=500,e="x",f="y",c=["red","green","blue"],b="black",g="black",n=0,p=0,h=0,v=.1,m=0,t=!0,d=[],u,w,q=!1,l=function(e){e.each(function(e,f,l){f=d3.select(l[f]);e.forEach(function(a,b){var c=Object.keys(a);for(b=a.total=0;b<c.length;++b)d.includes(c[b])||"id"==c[b]||(a.total+=+a[c[b]])});q&&e.sort(function(a,b){return b.total-a.total});u=d3.scaleBand().rangeRound([0,a]).padding(v).align(m);w=d3.scaleLinear().rangeRound([k,0]);var x=d3.scaleOrdinal().range(c);u.domain(e.map(function(a){return a.id}));
w.domain([0,d3.max(e,function(a){return a.total})]).nice();l=e.columns.filter(function(a){return"id"!=a&&!d.includes(a)});x.domain(l);e=d3.stack().keys(l)(e);e.forEach(function(a){a.forEach(function(b){b.keyRef=a.key})});f.append("g").selectAll("g").data(e).enter().append("g").attr("fill",function(a){return x(a.key)}).selectAll("rect").data(function(a,b){return a}).enter().append("rect").attr("class","rects").attr("x",function(a){return u(a.data.id)}).attr("y",function(a){return w(a[1])}).attr("height",
function(a){return w(a[0])-w(a[1])}).attr("width",u.bandwidth()).style("stroke",g).style("stroke-width",n);t&&(e=f.append("g").attr("font-size","75%").attr("text-anchor","end").attr("transform","translate("+p+","+h+")").selectAll("g").data(l.slice()).enter().append("g").attr("transform",function(a,b){return"translate(0,"+20*b+")"}),e.append("rect").attr("x",-19).attr("width",19).attr("height",19).attr("fill",x),e.append("text").attr("x",-22).attr("y",9.5).attr("dy","0.32em").text(function(a){return a}).attr("fill",
b))})};l.width=function(b){if(!arguments.length)return a;a=b;return l};l.height=function(a){if(!arguments.length)return k;k=a;return l};l.xSelector=function(a){if(!arguments.length)return e;e=a;return l};l.ySelector=function(a){if(!arguments.length)return f;f=a;return l};l.scaleX=function(a){if(!arguments.length)return u;u=a;return l};l.scaleY=function(a){if(!arguments.length)return w;w=a;return l};l.colors=function(a){if(!arguments.length)return c;c=a;return l};l.legendFill=function(a){if(!arguments.length)return b;
b=a;return l};l.legendX=function(a){if(!arguments.length)return p;p=a;return l};l.legendY=function(a){if(!arguments.length)return h;h=a;return l};l.sortBySum=function(a){if(!arguments.length)return q;q=a;return l};l.ignoreColumns=function(a){if(!arguments.length)return d;d=a;return l};l.padding=function(a){if(!arguments.length)return v;v=a;return l};l.align=function(a){if(!arguments.length)return m;m=a;return l};l.showLegend=function(a){if(!arguments.length)return t;t=a;return l};l.stroke=function(a){if(!arguments.length)return g;
g=a;return l};l.strokeWidth=function(a){if(!arguments.length)return n;n=a;return l};return l}
function wbStaticNumbers(){var a=500,k=500,e="black",f="red",c=function(b){b.each(function(b,c,p){c=d3.select(p[c]);var g=a/b.length,n=.1*a/(b.length-1);c.selectAll("number-value").data(b).enter().append("text").text(function(a){return a.name}).attr("x",function(a,b){return b*g}).attr("y",k).attr("text-anchor","left").attr("dominant-baseline","baseline").attr("fill",e).style("font-size","20px").style("font-weight","bold").text(function(a){return a.value}).style("font-size",function(a,b,c){a=c[b].getComputedTextLength();
return(g-n)/a*20+"px"}).call(d3wb.util.makeUnselectable()).each(function(a,b,c){a.numberBox=c[b].getBBox()});c.selectAll("number-label").data(b).enter().append("text").text(function(a){return a.name}).attr("x",function(a,b){return b*g}).attr("y",function(a){return k-a.numberBox.height+.25*a.numberBox.height}).attr("text-anchor","left").attr("fill",f).style("font-size","20px").text(function(a){return a.label}).style("font-size",function(a,b,c){a=c[b].getComputedTextLength();return(g-n)/a*20+"px"}).call(d3wb.util.makeUnselectable()).each(function(a,
b,c){a.numberBox=c[b].getBBox()})})};c.width=function(b){if(!arguments.length)return a;a=b;return c};c.height=function(a){if(!arguments.length)return k;k=a;return c};c.fillNumber=function(a){if(!arguments.length)return e;e=a;return c};c.fillLabel=function(a){if(!arguments.length)return f;f=a;return c};return c}
function wbTimeseries(){var a=500,k=500,e="hour",f="red",c="orange",b="black",g=void 0,n=d3.mean,p,h,v,m=function(m){m.each(function(d,m,t){m=d3.select(t[m]);var q=d3.extent(d,function(a){return a.date});d.forEach(function(a){a.month=a.date.getMonth();a.year=a.date.getFullYear();a.weekday=a.date.getDay();a.hour=a.date.getHours();a.minute=a.date.getMinutes();a.day=(new Date(a.date)).setHours(0,0,0,0);a["minute-of-day"]=(new Date(a.date)).setSeconds(0,0)});t=d3.extent(d,function(a){return a[e]});if("month"==
e){var l=d3.timeMonths(new Date(2017,0,1),new Date(2017,11,31));var u=d3.timeFormat("%B")}else if("year"==e){l=d3.timeYears(new Date(t[0],0,1),new Date(t[1],12,1));u=function(a){return a};var w=[];l.forEach(function(a){w.push(a.getFullYear())});l=w}else"weekday"==e?(l=[0,1,2,3,4,5,6],u=d3.timeFormat("%A")):"day"==e?(l=d3.timeDays(q[0],q[1]),u=d3.timeFormat("%d.%m.%Y")):"minute-of-day"==e&&(l=d3.timeMinutes(q[0]-6E4,q[1]),u=d3.timeFormat("%H:%M"));p=d3.scaleOrdinal().domain(l).range(d3.range(0,a,a/
l.length));var A=a/l.length*.1;d=d3.histogram().value(function(a){return a[e]}).thresholds(l)(d);t=d3.max(d,function(a){return a.length});h=d3.scaleLinear().range([k,0]).domain([0,t+1]);t=d3.extent(d,function(a){return a.length});var y=a/l.length-A;m.selectAll("rect").data(d).enter().append("rect").attr("class","rects").attr("x",0).attr("fill",function(a){return f}).attr("transform",function(a){return"translate("+p(a.x0)+","+h(a.length)+")"}).attr("width",function(a){return y}).attr("height",function(a){return k-
h(a.length)});if(g){d.forEach(function(a){var b=[];a.forEach(function(a){b=b.concat(a.value)});a.mean=n(b)});var z=d3.scaleOrdinal().domain(l).range(d3.range(0,a,a/l.length)),B=a/l.length*.8;t=d3.max(d,function(a){return a.mean});v=d3.scaleLinear().range([k,0]).domain([0,t+1]);m.selectAll(".dim").data(d).enter().append("rect").attr("class","valuerects").attr("fill",function(a){return c}).attr("transform",function(b){var c=y/2-a/l.length*.1;return"translate("+(z(b.x0)+c)+","+v(b.mean)+")"}).attr("width",
function(b){return a/l.length-B}).attr("height",function(a){return k-v(a.mean)})}m=m.append("g").attr("transform","translate(0,"+k+")").selectAll("xaxis").data(d).enter();m.append("line").attr("x1",0).attr("x2",a).style("stroke",b);m.append("text").text(function(a,b){if("weekday"!=e)return u(l[b]);a=d3.timeDays(new Date(2017,0,1),new Date(2017,0,8));return u(a[l[b]])}).style("text-anchor","middle").style("font-size","70%").style("fill",b).attr("x",function(b,c){return a/l.length*c+a/l.length/2-A/
2}).attr("y",function(a,b,c){return c[b].getBBox().height+5});m.append("line").attr("x1",function(b,c){return a/l.length*c+a/l.length/2-A/2}).attr("x2",function(b,c){return a/l.length*c+a/l.length/2-A/2}).attr("y1",0).attr("y2",5).style("stroke",b)})};m.width=function(b){if(!arguments.length)return a;a=b;return m};m.height=function(a){if(!arguments.length)return k;k=a;return m};m.target=function(a){if(!arguments.length)return e;e=a;return m};m.fill=function(a){if(!arguments.length)return f;f=a;return m};
m.fillValues=function(a){if(!arguments.length)return c;c=a;return m};m.fillAxis=function(a){if(!arguments.length)return b;b=a;return m};m.scaleX=function(a){if(!arguments.length)return p;p=a;return m};m.scaleY=function(a){if(!arguments.length)return h;h=a;return m};m.scaleY2=function(a){if(!arguments.length)return v;v=a;return m};m.valueColumn=function(a){if(!arguments.length)return g;g=a;return m};m.valueColumnAggregation=function(a){if(!arguments.length)return n;n=a;return m};return m}
function wbTreeMap(){var a=500,k=500,e=d3.scaleOrdinal(d3.schemeCategory20c),f="black",c=function(b){b.each(function(b,c,p){c=d3.select(p[c]);p=d3.treemap().tile(d3.treemapResquarify).size([a,k]).round(!0).paddingInner(1.5);b=d3.hierarchy(b).eachBefore(function(a){a.data.id=(a.parent?a.parent.data.id+".":"")+a.data.name}).sum(function(a){return a.size}).sort(function(a,b){return b.height-a.height||b.value-a.value});p(b);b=c.selectAll("g").data(b.leaves()).enter().append("g").attr("class","cells").attr("transform",
function(a){return"translate("+a.x0+","+a.y0+")"});b.append("rect").attr("id",function(a){return a.data.id}).attr("width",function(a){return a.x1-a.x0}).attr("height",function(a){return a.y1-a.y0}).attr("fill",function(a){return e(a.parent.data.id)});b.append("clipPath").attr("id",function(a){return"clip-"+a.data.id}).append("use").attr("xlink:href",function(a){return"#"+a.data.id});b.append("text").style("font-size","75%").attr("clip-path",function(a){return"url(#clip-"+a.data.id+")"}).selectAll("tspan").data(function(a){return a.data.name.split(/(?=[A-Z][^A-Z])/g)}).enter().append("tspan").attr("x",
4).attr("y",function(a,b){return 13+10*b}).attr("fill",f).text(function(a){return a})})};c.width=function(b){if(!arguments.length)return a;a=b;return c};c.height=function(a){if(!arguments.length)return k;k=a;return c};c.colors=function(a){if(!arguments.length)return e;e=a;return c};c.fill=function(a){if(!arguments.length)return f;f=a;return c};return c}
function wbWordCloud(){var a=500,k=500,e=["green","green"],f=function(c){c.each(function(b,c,f){var g=d3.select(f[c]);b.forEach(function(a){a.fontsize=1E4*+a.textrank});c=d3.extent(b,function(a){return a.textrank});var h=d3.scaleLinear().domain(c).interpolate(d3.interpolate).range(e);d3.layout.cloud().size([a,k]).words(b).padding(1).rotate(0).font("Roboto Condensed").fontSize(function(a){return a.fontsize}).on("end",function(b){g.attr("transform","translate("+a/2+","+k/2+")");b=g.selectAll("text").data(b,
function(a){return a.text});b.enter().append("text").style("fill",function(a){return h(a.textrank)}).attr("text-anchor","middle").attr("font-size",function(a){return a.size+"px"}).attr("transform",function(a){return"translate("+[a.x,a.y]+")rotate("+a.rotate+")"}).text(function(a){return a.text});b.exit().remove()}).start()})};f.width=function(c){if(!arguments.length)return a;a=c;return f};f.height=function(a){if(!arguments.length)return k;k=a;return f};f.colorRange=function(a){if(!arguments.length)return e;
e=a;return f};return f};